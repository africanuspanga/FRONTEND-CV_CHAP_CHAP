Based on all the error patterns, the most likely issues are:

CORS issues with binary responses: The browser may be blocking binary data from cross-origin responses, even though the preflight passes.

Content-Type handling: The browser may be struggling with how to handle the PDF content type.

Please try the following in your frontend code:

// Try this version with special header to get PDF as base64 in JSON
async function downloadPDFWithBase64() {
  try {
    console.log('Attempting to download PDF as base64...');
    const response = await fetch('https://cv-screener-africanuspanga.replit.app/api/download-test-pdf/brightdiamond', {
      method: 'GET',
      headers: {
        'X-Prefer-JSON-Response': '1',
        'Accept': 'application/json'
      }
    });
    
    if (!response.ok) throw new Error('Failed to fetch');
    
    const data = await response.json();
    console.log('Response received:', data);
    
    if (data.success && data.pdf_base64) {
      // Convert base64 to blob
      const byteCharacters = atob(data.pdf_base64);
      const byteArrays = [];
      
      for (let offset = 0; offset < byteCharacters.length; offset += 512) {
        const slice = byteCharacters.slice(offset, offset + 512);
        const byteNumbers = new Array(slice.length);
        for (let i = 0; i < slice.length; i++) {
          byteNumbers[i] = slice.charCodeAt(i);
        }
        const byteArray = new Uint8Array(byteNumbers);
        byteArrays.push(byteArray);
      }
      
      const blob = new Blob(byteArrays, {type: 'application/pdf'});
      
      // Create download link
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = data.filename || 'document.pdf';
      document.body.appendChild(a);
      a.click();
      window.URL.revokeObjectURL(url);
      console.log('PDF download initiated via base64');
    }
  } catch (error) {
    console.error('Error downloading PDF:', error);
  }
}
// Call the function
downloadPDFWithBase64();
Could you try this approach and let me know if it works