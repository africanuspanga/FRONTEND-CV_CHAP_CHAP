Frontend Integration Guide: Enhanced CV Upload & AI Analysis
Overview
The CV Chap Chap backend now provides enhanced CV parsing with OpenAI GPT-4 integration that extracts structured data and provides personalized onboarding insights. This guide shows frontend developers how to integrate with the API.

API Endpoints
1. Upload Configuration (Optional)
GET /api/upload-cv-info
Response:

{
  "allowed_extensions": ["pdf", "docx", "doc", "html", "rtf", "txt"],
  "max_file_size_bytes": 10485760,
  "max_file_size_mb": 10,
  "supported_formats": {
    "pdf": "PDF documents (text-based)",
    "docx": "Microsoft Word documents (2007+)",
    "doc": "Legacy Microsoft Word documents",
    "html": "HTML documents",
    "rtf": "Rich Text Format",
    "txt": "Plain text files"
  }
}
2. Synchronous CV Upload & Analysis (Recommended for Frontend)
POST /api/sync-upload-cv-file
Content-Type: multipart/form-data
Request:

Form field: cvFile (file upload)
Supported formats: PDF, DOCX, DOC, HTML, RTF, TXT
Max size: 10MB
Response Structure:

{
  "success": true,
  "job_id": "uuid-string",
  "status": "complete",
  "cvData": {
    "personalInfo": {
      "firstName": "John",
      "lastName": "Smith",
      "email": "john.smith@email.com",
      "phone": "+1-555-0199",
      "location": "City, State"
    },
    "workExperiences": [
      {
        "company": "TechCorp Inc.",
        "position": "Senior Software Engineer",
        "startDate": "2021",
        "endDate": "Present",
        "description": "Led development team of 8 developers..."
      }
    ],
    "education": [
      {
        "institution": "Tech University",
        "degree": "Bachelor of Science in Computer Science",
        "year": "2017",
        "gpa": "3.8/4.0"
      }
    ],
    "skills": [
      {
        "name": "Python",
        "category": "Programming Languages"
      }
    ],
    "projects": [],
    "certifications": [
      {
        "name": "AWS Certified Solutions Architect",
        "issuer": "Amazon",
        "date": "2022"
      }
    ],
    "languages": [],
    "references": []
  },
  "onboardingInsights": {
    "currentJobTitle": "Senior Software Engineer",
    "currentCompany": "TechCorp Inc.",
    "keySkills": ["Python", "JavaScript", "AWS", "React", "Docker"],
    "tailoredIndustrySuggestion": "Software Development",
    "careerInsights": {
      "careerLevel": "senior",
      "yearsOfExperience": 7,
      "primaryIndustries": ["Software Development", "Information Technology", "Cloud Computing"]
    },
    "qualityFeedback": {
      "overallCompleteness": "excellent",
      "skillsCount": 15,
      "hasSummary": true,
      "hasWorkExperience": true,
      "hasEducation": true,
      "goodPoints": [
        "Strong technical skills with modern technologies",
        "Clear demonstration of leadership experience",
        "Comprehensive full-stack development skills"
      ],
      "improvementPoints": [
        "Add specific achievements or metrics",
        "Include personal projects or open-source contributions",
        "Provide professional profile links"
      ]
    }
  },
  "metadata": {
    "filename": "john_smith_cv.pdf",
    "processed_at": "2025-07-30T09:10:37.690823",
    "processing_time": 4.45,
    "ai_analysis_included": true,
    "file_size": 1334
  }
}
Frontend Implementation Examples
React/JavaScript Integration
// CV Upload Component
import React, { useState } from 'react';
const CVUploadComponent = () => {
  const [uploading, setUploading] = useState(false);
  const [cvData, setCvData] = useState(null);
  const [insights, setInsights] = useState(null);
  const [error, setError] = useState(null);
  const handleFileUpload = async (file) => {
    setUploading(true);
    setError(null);
    
    try {
      const formData = new FormData();
      formData.append('cvFile', file);
      
      const response = await fetch('/api/sync-upload-cv-file', {
        method: 'POST',
        body: formData
      });
      
      if (!response.ok) {
        throw new Error(`Upload failed: ${response.status}`);
      }
      
      const result = await response.json();
      
      // Extract structured CV data for form population
      setCvData(result.cvData);
      
      // Extract AI insights for onboarding UX
      setInsights(result.onboardingInsights);
      
      // Success! Now populate your CV form with structured data
      populateCVForm(result.cvData);
      
      // Show onboarding insights to user
      showOnboardingInsights(result.onboardingInsights);
      
    } catch (err) {
      setError(err.message);
    } finally {
      setUploading(false);
    }
  };
  
  const populateCVForm = (cvData) => {
    // Populate your existing CV form fields
    const personalInfo = cvData.personalInfo || {};
    
    // Example: populate form fields
    document.getElementById('firstName').value = personalInfo.firstName || '';
    document.getElementById('lastName').value = personalInfo.lastName || '';
    document.getElementById('email').value = personalInfo.email || '';
    document.getElementById('phone').value = personalInfo.phone || '';
    
    // Populate work experiences
    const workExperiences = cvData.workExperiences || [];
    workExperiences.forEach((experience, index) => {
      // Add work experience to your form
      addWorkExperienceToForm(experience, index);
    });
    
    // Populate education
    const education = cvData.education || [];
    education.forEach((edu, index) => {
      addEducationToForm(edu, index);
    });
    
    // Populate skills
    const skills = cvData.skills || [];
    skills.forEach(skill => {
      addSkillToForm(skill);
    });
  };
  
  const showOnboardingInsights = (insights) => {
    // Use insights for enhanced UX
    const currentRole = insights.currentJobTitle;
    const company = insights.currentCompany;
    const keySkills = insights.keySkills || [];
    const careerLevel = insights.careerInsights?.careerLevel;
    const industry = insights.tailoredIndustrySuggestion;
    
    // Show personalized welcome message
    showWelcomeMessage(`Welcome ${currentRole} from ${company}!`);
    
    // Suggest templates based on career level and industry
    suggestTemplates(careerLevel, industry);
    
    // Show quality feedback
    const feedback = insights.qualityFeedback || {};
    if (feedback.goodPoints?.length > 0) {
      showPositiveFeedback(feedback.goodPoints);
    }
    if (feedback.improvementPoints?.length > 0) {
      showImprovementSuggestions(feedback.improvementPoints);
    }
  };
  return (
    <div className="cv-upload-component">
      <input
        type="file"
        accept=".pdf,.docx,.doc,.html,.rtf,.txt"
        onChange={(e) => handleFileUpload(e.target.files[0])}
        disabled={uploading}
      />
      
      {uploading && (
        <div className="upload-progress">
          <p>Processing CV with AI analysis...</p>
          <div className="progress-bar">
            <div className="progress-fill"></div>
          </div>
        </div>
      )}
      
      {error && (
        <div className="error-message">
          <p>Upload failed: {error}</p>
        </div>
      )}
      
      {cvData && (
        <div className="upload-success">
          <p>CV processed successfully!</p>
          <p>Extracted {cvData.workExperiences?.length || 0} work experiences</p>
          <p>Found {cvData.skills?.length || 0} skills</p>
        </div>
      )}
    </div>
  );
};
export default CVUploadComponent;
Vue.js Integration
<template>
  <div class="cv-upload">
    <input
      type="file"
      @change="handleFileUpload"
      accept=".pdf,.docx,.doc,.html,.rtf,.txt"
      :disabled="uploading"
    />
    
    <div v-if="uploading" class="loading">
      Processing CV with AI analysis...
    </div>
    
    <div v-if="error" class="error">
      {{ error }}
    </div>
    
    <div v-if="uploadSuccess" class="success">
      <h3>CV Processed Successfully!</h3>
      <p>Current Role: {{ insights.currentJobTitle }}</p>
      <p>Company: {{ insights.currentCompany }}</p>
      <p>Career Level: {{ insights.careerInsights?.careerLevel }}</p>
      <p>Key Skills: {{ insights.keySkills?.join(', ') }}</p>
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {
      uploading: false,
      uploadSuccess: false,
      error: null,
      cvData: null,
      insights: null
    };
  },
  methods: {
    async handleFileUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      this.uploading = true;
      this.error = null;
      
      try {
        const formData = new FormData();
        formData.append('cvFile', file);
        
        const response = await fetch('/api/sync-upload-cv-file', {
          method: 'POST',
          body: formData
        });
        
        if (!response.ok) {
          throw new Error(`Upload failed: ${response.status}`);
        }
        
        const result = await response.json();
        
        this.cvData = result.cvData;
        this.insights = result.onboardingInsights;
        this.uploadSuccess = true;
        
        // Emit events for parent components
        this.$emit('cv-parsed', result.cvData);
        this.$emit('insights-received', result.onboardingInsights);
        
      } catch (err) {
        this.error = err.message;
      } finally {
        this.uploading = false;
      }
    }
  }
};
</script>
Angular Integration
// cv-upload.service.ts
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
export interface CVUploadResponse {
  success: boolean;
  job_id: string;
  status: string;
  cvData: any;
  onboardingInsights: any;
  metadata: any;
}
@Injectable({
  providedIn: 'root'
})
export class CVUploadService {
  constructor(private http: HttpClient) {}
  
  uploadCV(file: File): Observable<CVUploadResponse> {
    const formData = new FormData();
    formData.append('cvFile', file);
    
    return this.http.post<CVUploadResponse>('/api/sync-upload-cv-file', formData);
  }
}
// cv-upload.component.ts
import { Component } from '@angular/core';
import { CVUploadService } from './cv-upload.service';
@Component({
  selector: 'app-cv-upload',
  template: `
    <div class="cv-upload">
      <input
        type="file"
        (change)="onFileSelected($event)"
        accept=".pdf,.docx,.doc,.html,.rtf,.txt"
        [disabled]="uploading"
      />
      
      <div *ngIf="uploading" class="loading">
        Processing CV with AI analysis...
      </div>
      
      <div *ngIf="error" class="error">
        {{ error }}
      </div>
      
      <div *ngIf="uploadResult" class="success">
        <h3>CV Processed Successfully!</h3>
        <p>Current Role: {{ uploadResult.onboardingInsights.currentJobTitle }}</p>
        <p>Company: {{ uploadResult.onboardingInsights.currentCompany }}</p>
        <p>Skills: {{ uploadResult.onboardingInsights.keySkills?.join(', ') }}</p>
      </div>
    </div>
  `
})
export class CVUploadComponent {
  uploading = false;
  error: string | null = null;
  uploadResult: CVUploadResponse | null = null;
  
  constructor(private cvUploadService: CVUploadService) {}
  
  onFileSelected(event: any) {
    const file = event.target.files[0];
    if (file) {
      this.uploadCV(file);
    }
  }
  
  uploadCV(file: File) {
    this.uploading = true;
    this.error = null;
    
    this.cvUploadService.uploadCV(file).subscribe({
      next: (result) => {
        this.uploadResult = result;
        this.populateCVForm(result.cvData);
        this.handleOnboardingInsights(result.onboardingInsights);
      },
      error: (err) => {
        this.error = err.message || 'Upload failed';
      },
      complete: () => {
        this.uploading = false;
      }
    });
  }
  
  populateCVForm(cvData: any) {
    // Populate your CV form with extracted data
    // Emit events or update services as needed
  }
  
  handleOnboardingInsights(insights: any) {
    // Use insights for personalized UX
    // Show welcome messages, suggest templates, etc.
  }
}
Key Integration Points
1. Form Population
Use the structured cvData to automatically populate your CV form:

personalInfo → Basic details form
workExperiences → Work history section
education → Education section
skills → Skills section
certifications → Certifications section
projects → Projects section
2. Onboarding Enhancement
Use onboardingInsights for personalized UX:

currentJobTitle + currentCompany → Personalized welcome
careerLevel → Template suggestions (entry/mid/senior/executive)
tailoredIndustrySuggestion → Industry-specific templates
keySkills → Skill recommendations
qualityFeedback → Improvement suggestions
3. Error Handling
// Common error scenarios
const handleUploadError = (error) => {
  if (error.includes('413')) {
    return 'File too large. Maximum size is 10MB.';
  } else if (error.includes('400')) {
    return 'Invalid file format. Please use PDF, DOCX, HTML, RTF, or TXT.';
  } else if (error.includes('500')) {
    return 'Processing error. Please try again.';
  }
  return 'Upload failed. Please try again.';
};
4. Processing Time
Average processing time: 3-7 seconds (includes AI analysis)
Show progress indicator during upload
Processing time varies with file size and content complexity
5. File Validation
const validateFile = (file) => {
  const allowedTypes = ['.pdf', '.docx', '.doc', '.html', '.rtf', '.txt'];
  const maxSize = 10 * 1024 * 1024; // 10MB
  
  const extension = file.name.toLowerCase().split('.').pop();
  
  if (!allowedTypes.includes(`.${extension}`)) {
    throw new Error('Invalid file type');
  }
  
  if (file.size > maxSize) {
    throw new Error('File too large');
  }
  
  return true;
};
Production Considerations
Rate Limiting: The API includes rate limiting for OpenAI calls
Fallback Handling: If AI analysis fails, basic parsing still works
File Cleanup: Temporary files are automatically cleaned up
Error Recovery: Comprehensive error handling with user-friendly messages
Processing Time: Show appropriate loading states (3-7 seconds typical)
Testing
Use the test page at /enhanced-cv-test to verify integration and see expected response formats.

The API is production-ready and provides consistent, structured data that your frontend can reliably use to populate CV forms and enhance user onboarding experience.